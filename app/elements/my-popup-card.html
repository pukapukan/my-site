<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="my-font-awesome.html">

<polymer-element name="my-popup-card">
  <template>
    <link href="/elements/my-popup-card.css" rel="stylesheet">

    <core-animated-pages selected="{{page}}" transitions="hero-transition" on-core-animated-pages-transition-end="{{complete}}">
      <section id="chipSection">
        <div class="chip-container" hero-p on-tap="{{transition}}">
          <template repeat="{{items as item}}">
            <div class="chip" hero-id="{{item.project}}" hero?="{{selectedChip === item}}">
              <!-- <div class="chip-cover">Click for more</div> -->
              <div class="chip-top {{item.theme}} {{item.css}}"  hero-id="{{item.project}}-art" hero?="{{selectedChip === item}}"></div>
              <div class="chip-bottom">
                <div class="chip-header">{{item.project}}</div>
                <div class="chip-subheader">{{item.description.short}}</div>
              </div>
            </div>
          </template>
        </div>
      </section>

      <section id="cardSection">
        <div class="card" hero-id="{{selectedChip.project}}" hero>
          <div class="card-left {{selectedChip.theme}} {{selectedChip.css}}" hero-id="{{selectedChip.project}}-art" hero></div>

          <div class="close-button" on-tap="{{transition}}"><my-font-awesome attr="fa-close fa-3x"></my-font-awesome></div>

          <div class="card-right" flex>            
            <div layout horizontal center>
              <div class="card-icon {{selectedChip.theme}}"></div>
              <div flex>
                <div class="card-header">{{selectedChip.project}}</div>
                <div class="card-subHeader">
                  <template if="{{selectedChip.url}}">
                    <a href="{{selectedChip.url}}"><my-font-awesome attr="fa-home"></my-font-awesome> Homepage</a>
                  </template>
                  <template if="{{selectedChip.repository}}">
                    <a href="{{selectedChip.repository.url}}"><my-font-awesome attr="fa-{{selectedChip.repository.icon}}"></my-font-awesome> {{selectedChip.repository.provider}}</a>
                  </template>
                </div>
              </div>
            </div>
            <div id="description" class="description"></div>
            <div class="stacks">
              <div class="subheader"><my-font-awesome attr="fa-navicon"></my-font-awesome> Tech stacks</div>
              <ul>
                <template repeat="{{stack in selectedChip.stacks}}">
                  <li>{{stack}}</li>
                </template>
              </ul>
            </div>
          </div>
        </div>
      </section>

    </core-animated-pages>
  </template>
  <script>
    Polymer('my-popup-card', {
      page: 0,
      items: [
        {
          project: 'Crawl2Tweet',
          css: 'crawl2tweet',
          theme: 'gray',
          stacks: ['node', 'javascript'],
          url: 'https://www.npmjs.com/package/crawl2tweet',
          repository: {
            provider: 'Github',
            icon: 'github',
            url: 'https://github.com/pukapukan/Crawl2Tweet'
          },
          description: {
            short: 'Web crawler that tweets',
            long: 'Crawl2Tweet is a Web crawler + Twitterbot that tweets new articles from web sites.  It can be easily hosted on free tiers of any PaaS and MongoDB on cloud.  <br>Accounts powered by Crawl2Tweet:' +
            '<ul>' +
              '<li><a href="//twitter.com/invenlol">@InvenLoL</a></li>' +
              '<li><a href="//twitter.com/androidpubbot">@AndroidPubBot</a></li>' +
              '<li><a href="//tlrgengineering">@TLGREngineering</a></li>' +
            '</ul>'
          },
        },

        {
          project: 'passport-nate',
          css: 'passport-nate',
          stacks: ['node', 'javascript'],
          url: 'https://www.npmjs.com/package/passport-nate',
          repository: {
            provider: 'Github',
            icon: 'github',
            url: 'https://github.com/pukapukan/passport-nate'
          },
          theme: 'black',
          description: {
            short: 'nate/cyworld authentication strategy for passport.js',
            long: 'Passport is authentication middleware for Node.js.  passport-nate is a Node module that implements Passport strategy for Nate (Cyworld) using OAuth.'
          }
        },
        {
          project: 'FBench IDE',
          css: 'fbench',
          theme: 'gray',
          stacks: ['java', 'function block'],
          url: 'http://homepages.engineering.auckland.ac.nz/~vyatkin/fbench/index.html',
          repository: {
            provider: 'SourceForge',
            icon: 'code',
            url: 'http://sourceforge.net/projects/oooneida-fbench/'
          },
          description: {
            short: 'Graphical interactive IDE built for IEC61499 Function Block',
            long: '<div>FBench IDE is an open-source graphical software tool for embedded automation components and systems based on IEC61499 standard.  The project originateds in OOONEIDA Workbench pioneered by Dr. James Christensen in 2005.<br>I actively contributed to its development between 2006 and 2009 as a part under guidance of Prof. Valeriy Vyatkin.'
          },
        },
        {
          project: 'Web Fundamentals',
          css: 'fundamentals',
          language: 'translation',
          description: {
            short: 'Translate Google\'s Web Fundamental into Korean'
          },
          url: 'https://github.com/google/WebFundamentals',
          theme: 'black'
        }
      ],
      selectedChip: null,
      transition: function(e, index, el) {
        if (this.page === 0 && e.target.templateInstance.model.item) {
          this.selectedChip = e.target.templateInstance.model.item;
          this.$.description.innerHTML = this.selectedChip.description.long;

          this.page = 1;
        } else {
          this.page = 0;
        }
      },
      toLowerCase: function(val) {
        return val.toString().toLowerCase();
      }
    });
  </script>
</polymer-element>
